

Mediator = function () {

    var debug = function () {
        // console.log or air.trace as desired
    };

    var components = {};

    var broadcast = function (event, args, source) {        
        if (!event) {
            return;
        }
        args = args || [];
        //debug(["Mediator received", event, args].join(' '));
        for (var c in components) {
            if (typeof components[c]["on" + event] == "function") {
                try {
                    //debug("Mediator calling " + event + " on " + c);
                    source = source || components[c];
                    components[c]["on" + event].apply(source, args);
                } catch (err) {
                    debug(["Mediator error.", event, args, source, err].join(' '));
                }
            }
        }
    };

    var addComponent = function (name, component, replaceDuplicate) {
        if (name in components) {
            if (replaceDuplicate) {
                removeComponent(name);
            } else {
                throw new Error('Mediator name conflict: ' + name);
            }
        }
        components[name] = component;
    };

    var removeComponent = function (name) {
        if (name in components) {
            delete components[name];
        }
    };

    var getComponent = function (name) {
        return components[name]; // undefined if component has not been added
    };

    var contains = function (name) {
        return (name in components);
    };

    return {
        name: "Mediator",
        broadcast: broadcast,
        add: addComponent,
        rem: removeComponent,
        get: getComponent,
        has: contains
    };
}();







//jQuery(document).ready(function () {
//    Pager(currentPage, 'paging', totalCount, pageSize);
//    //jQuery('#leasetab').bind('click', function () {        alert('clicked');    });
//});

var OpenHouseController = (function () {
    var isLeaseLoaded = false;
    var leaseContainer = jQuery("[id$='leaseListings']");
    var saleContainer = jQuery("[id$='saleListings']");
    var urlleaseOpenHouse = "/servicepage.aspx/getleasedopenhouse";
    var openHouseTabs = jQuery(".List_viewsbar .openhouse");
    //LoadLease = function () {        
    //    if (!isLeaseLoaded) {
            
    //        AjaxCall(urlleaseOpenHouse, {}, pasteLeasingMarkup, errorInLoadingdata, errorInLoadingdata);
    //    } else {
    //        alert('already loaded');
    //    }
        
    //};
    //errorInLoadingdata = function () {
        
    //};
    //pasteLeasingMarkup = function (thisContext, result, paramsReturn) {
    //   isLeaseLoaded = true;     
    //};
    setView = function () {        
        leaseContainer.toggle();
        saleContainer.toggle();
        openHouseTabs.toggleClass('.active');
    };
    return {
        onSetView: function () {
            setView();
        }
    };
})();


jQuery(document).ready(function () {  
    Mediator.add('OpenHouseController', OpenHouseController);
    Pager(currentPage, 'paging', totalCount, pageSize);
    $("#leasetab,#saletab").on("click", function (e) {
        e.preventDefault();
        Mediator.broadcast("SetView");
    });
});

